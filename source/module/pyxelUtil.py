# -*- coding: utf-8 -*-
import pyxel

class PyxelUtil:
    '''
    pyxel用のユーティリティクラス
    '''

    KANA_DIC = {
        "A"  : ("0010000", "0111100", "0010001", "1111110", "1010101", "0111001"),
        "I"  : ("0000000", "1000010", "1000001", "1010001", "0110001", "0010000"),
        "U"  : ("0011100", "0000000", "0111110", "1000001", "0000001", "0011110"),
        "E"  : ("0011110", "0000000", "1111111", "0000110", "0111000", "1100111"),
        "O"  : ("0001001", "0111101", "0001000", "0111110", "1001001", "0111001"),
        "KA" : ("0100010", "1111001", "0100101", "0100101", "0100100", "1001100"),
        "KI" : ("0001000", "1111110", "0111111", "0000100", "0100000", "0011110"), 
        "KU" : ("0000110", "0011000", "0100000", "1100000", "0011000", "0000110"),
        "KE" : ("1000100", "1011111", "1000010", "1000010", "1000010", "0100100"),
        "KO" : ("0111110", "0000010", "0000000", "0000000", "1000001", "0111110"),
        "SA" : ("0001000", "1111111", "0001000", "0000100", "0100000", "0011110"),
        "SI" : ("0100000", "0100000", "0100000", "0100001", "0100001", "0011110"),
        "SU" : ("0000010", "0111111", "0001110", "0001110", "0000010", "0001100"),
        "SE" : ("0100010", "1111111", "0100010", "0100100", "0100000", "0011110"),
        "SO" : ("0100010", "0010100", "1111111", "0010000", "0100000", "0011110"),
        "TA" : ("0100000", "1111110", "0100000", "0101110", "1010000", "1001110"),
        "TI" : ("0010000", "1111110", "0100000", "1111110", "0000001", "0111110"),
        "TU" : ("0000000", "1111110", "0000001", "0000001", "0000010", "0011100"),
        "TE" : ("0000000", "1111111", "0001100", "0010000", "0010000", "0001110"),
        "TO" : ("1000000", "0100110", "0111000", "1000000", "1000000", "0111110"),
        "NA" : ("0010010", "1110101", "0100100", "1001110", "0010101", "0011101"),
        "NI" : ("0100000", "1001111", "1000000", "1000000", "1001000", "0100111"),
        "NU" : ("0010100", "0111110", "1010101", "1010101", "1011011", "0110011"),
        "NE" : ("0101100", "1110010", "0100010", "1100010", "1101110", "0101101"),
        "NO" : ("0011100", "0101010", "1001001", "1001001", "1001001", "0110010"),
        "HA" : ("1000010", "1011111", "1000010", "1001110", "1010011", "1001101"),
        "HI" : ("1110000", "0010111", "0100010", "1000010", "1000010", "0111100"),
        "HU" : ("0111100", "0000000", "0011000", "1000101", "1000101", "1011001"),
        "HE" : ("0010000", "0101000", "1000100", "1000010", "0000010", "0000001"),
        "HO" : ("1011111", "1000100", "1011111", "1000100", "1011110", "1011101"),
        "MA" : ("0111111", "0000100", "0111111", "0000100", "0111110", "0111101"),
        "MI" : ("0111000", "0001010", "0011111", "0101010", "1001010", "0110010"),
        "MU" : ("0100000", "1111010", "0100001", "1100000", "1100010", "0111100"),
        "ME" : ("0010100", "0111110", "1010101", "1010101", "1011101", "0111001"),
        "MO" : ("0010000", "0111110", "0010000", "0111110", "0010001", "0001110"),
        "YA" : ("0100100", "1111110", "0100101", "0100001", "0010010", "0010000"),
        "YU" : ("0000100", "1011110", "1100101", "1100101", "1001110", "0011100"),
        "YO" : ("0001000", "0001110", "0001000", "0111100", "1001010", "0111000"),
        "RA" : ("0100110", "0100001", "0111100", "1000010", "0000001", "0011110"),
        "RI" : ("0000010", "0100001", "0100001", "0100001", "0000010", "0001100"),
        "RU" : ("0111110", "0001100", "0110010", "1000001", "0011001", "0011110"),
        "RE" : ("0100100", "1101010", "0110010", "1100010", "1100010", "0100011"),
        "RO" : ("0111110", "0001100", "0111110", "1000001", "0000001", "0011110"),
        "WA" : ("0100000", "1101110", "0110001", "1100001", "1100001", "0100010"),
        "WO" : ("0001000", "0111110", "0010100", "0011111", "0110000", "0011110"),
        "NN" : ("0001000", "0010000", "0110000", "0101001", "1001001", "1000110"),
        "LA" : ("0000000", "0010000", "0111000", "0011000", "1111100", "1110100"),
        "LI" : ("0000000", "0000000", "1001000", "1000100", "1000100", "0100100"),
        "LU" : ("0000000", "0011000", "0000000", "0111000", "0000100", "0011000"),
        "LE" : ("0000000", "0111000", "0000000", "1111100", "0011000", "1101100"),
        "LO" : ("0000000", "0010000", "0111000", "0010010", "1111100", "0110100"),
        "LYA": ("0000000", "0101000", "1111100", "0101100", "0101000", "0100000"),
        "LYU": ("0000000", "0010000", "1011000", "1110100", "1011000", "0010000"),
        "LYO": ("0000000", "0010000", "0011100", "0010000", "0111000", "0110100"),
        "LTU": ("0000000", "0000000", "0111100", "0000010", "0000010", "0001100"),
        "D"  : ("1010000", "0101000", "0000000", "0000000", "0000000", "0000000"),
        "HD" : ("0100000", "1010000", "0100000", "0000000", "0000000", "0000000"),
        "("  : ("0011100", "0010000", "0010000", "0010000", "0010000", "0010000"),
        ")"  : ("0000100", "0000100", "0000100", "0000100", "0000100", "0011100"),
        ","  : ("0000000", "0000000", "0000000", "0000000", "0010000", "0001000"),
        "."  : ("0000000", "0000000", "0000000", "0010000", "0101000", "0010000"),
        "a"  : ("1111111", "0000001", "0001010", "0001100", "0001000", "0110000"),
        "i"  : ("0000001", "0000010", "1111100", "0001000", "0001000", "0001000"),
        "u"  : ("0001000", "1111111", "1000001", "0000001", "0000010", "0011100"),
        "e"  : ("0000000", "0111110", "0001000", "0001000", "0001000", "1111111"),
        "o"  : ("0000010", "1111111", "0000110", "0001010", "0010010", "1100010"),
        "ka" : ("0010000", "1111111", "0010001", "0010001", "0100001", "1000111"),
        "ki" : ("0001000", "0111110", "0001000", "1111111", "0001000", "0001000"),
        "ku" : ("0100000", "0111111", "1000001", "0000001", "0000010", "0011100"),
        "ke" : ("0100000", "0111111", "1000010", "0000010", "0000100", "0011000"),
        "ko" : ("0000000", "0111111", "0000001", "0000001", "0000001", "0111111"),
        "sa" : ("0010010", "1111111", "0010010", "0010010", "0000010", "0001100"),
        "si" : ("0111000", "0000001", "0111001", "0000001", "0000010", "0111100"),
        "su" : ("1111111", "0000010", "0000100", "0001100", "0010010", "1100001"),
        "se" : ("0100000", "1111111", "0100001", "0100010", "0100000", "0011111"),
        "so" : ("0000000", "1000001", "0100010", "0000100", "0001000", "0010000"),
        "ta" : ("0100000", "0111111", "1000001", "0001111", "0000010", "0111100"),
        "ti" : ("0000010", "0111100", "0001000", "1111111", "0001000", "0110000"),
        "tu" : ("0000000", "1010001", "1010001", "0000001", "0000010", "0011100"),
        "te" : ("0111110", "0000000", "1111111", "0001000", "0001000", "0110000"),
        "to" : ("1000000", "1000000", "1111000", "1000110", "1000000", "1000000"),
        "na" : ("0000100", "1111111", "0000100", "0000100", "0001000", "0010000"),
        "ni" : ("0000000", "0111110", "0000000", "0000000", "0000000", "1111111"),
        "nu" : ("1111111", "0000010", "0010100", "0001000", "0010100", "1100010"),
        "ne" : ("0001000", "1111111", "0000010", "0001100", "1111011", "0001000"),
        "no" : ("0000001", "0000001", "0000001", "0000010", "0000100", "0111000"),
        "ha" : ("0010000", "0010000", "0100010", "0100001", "1000001", "1000001"),
        "hi" : ("1000000", "1111110", "1000000", "1000000", "1000000", "0111110"),
        "hu" : ("0000000", "1111111", "0000001", "0000001", "0000010", "0111100"),
        "he" : ("0010000", "0101000", "1000100", "0000010", "0000001", "0000001"),
        "ho" : ("0001000", "0111110", "0001000", "0101010", "1001001", "0001000"),
        "ma" : ("1111111", "0000001", "0000001", "0010010", "0001100", "0000100"),
        "mi" : ("0111100", "0000010", "0111100", "0000010", "0111100", "0000010"),
        "mu" : ("0010000", "0010000", "0100100", "0100110", "1001010", "1110001"),
        "me" : ("0000010", "0100010", "0010100", "0001100", "0001010", "0110000"),
        "mo" : ("0111110", "0010000", "1111111", "0010000", "0010000", "0001111"),
        "ya" : ("0100000", "0101111", "1110001", "0010010", "0001000", "0001000"),
        "yu" : ("0000000", "0111110", "0000010", "0000010", "0000010", "1111111"),
        "yo" : ("0000000", "0111111", "0000001", "0111111", "0000001", "0111111"),
        "ra" : ("0111110", "0000000", "1111111", "0000001", "0000010", "0011100"),
        "ri" : ("0100001", "0100001", "0100001", "0000001", "0000010", "0011100"),
        "ru" : ("0010100", "0010100", "0010100", "0010100", "0100101", "1000110"),
        "re" : ("0100000", "0100000", "0100010", "0100100", "0101000", "0110000"),
        "ro" : ("0000000", "1111110", "1000010", "1000010", "1000010", "1111110"),
        "wa" : ("1111111", "1000001", "1000001", "0000001", "0000010", "0011100"),
        "wo" : ("1111111", "0000001", "1111111", "0000001", "0000010", "0011100"),
        "nn" : ("1000000", "0100001", "0000001", "0000010", "0000100", "1111000"),
        "la" : ("0000000", "0000000", "1111100", "0000100", "0011000", "0110000"),
        "li" : ("0000000", "0000000", "0000100", "1111000", "0010000", "0010000"),
        "lu" : ("0000000", "0010000", "1111100", "1000100", "0000100", "0011000"),
        "le" : ("0000000", "0000000", "0111000", "0010000", "0010000", "1111100"),
        "lo" : ("0000000", "0001000", "1111100", "0011000", "0101000", "1001000"),
        "lya": ("0000000", "0100000", "1111100", "0100100", "0101000", "0100000"),
        "lyu": ("0000000", "0000000", "0111000", "0001000", "0001000", "1111100"),
        "lyo": ("0000000", "1111000", "0001000", "1111000", "0001000", "1111000"),
        "ltu": ("0000000", "0000000", "1010100", "1010100", "0000100", "0011000"),
        "d"  : ("1010000", "0101000", "0000000", "0000000", "0000000", "0000000"),
        "hd" : ("0100000", "1010000", "0100000", "0000000", "0000000", "0000000"),
        "-"  : ("0000000", "0000000", "0000000", "0111110", "0000000", "0000000")
    }

    @classmethod
    def text(self, x : int, y : int, txt , color :int=7):
        '''
        テキストを出力する

        pyxel.txtの上位互換で、引数のtxtにKANA_DICのキーをlist/tupleで設定することでカナ文字が表示できます。
        '''
        _txtlist = []
        if type(txt) == str:
            _txtlist.append(txt)
        else:
            _txtlist = list(txt)

        for _value in _txtlist:
            if _value == "":
                continue

            if _value[0] == "*":
                _v = _value[1:len(_value)]
                pyxel.text(x, y + 1, _v, color)
                x = x + 4 * len(_v)
            
            else:
                try:
                    for _row, _rowdata in enumerate(self.KANA_DIC[_value]):
                        for _col, _v in enumerate(_rowdata):
                            if _v == "1":
                                pyxel.pset(x + _col, y + _row, color)
                    x = x + 8
                except KeyError:
                    x = x + 8
                    continue


if __name__ == "__main__":
    pyxel.init(192, 192)
    PyxelUtil.text( 16,  12, ("A", "I", "U", "E", "O"), 7)
    PyxelUtil.text( 56,  12, ("KA", "KI", "KU", "KE", "KO"), 2)
    PyxelUtil.text( 96,  12, ("SA", "SI", "SU", "SE", "SO"), 3)
    PyxelUtil.text(136,  12, ("TA", "TI", "TU", "TE", "TO"), 4)
    PyxelUtil.text( 16,  20, ("NA", "NI", "NU", "NE", "NO"), 5)
    PyxelUtil.text( 56,  20, ("HA", "HI", "HU", "HE", "HO"), 6)
    PyxelUtil.text( 96,  20, ("MA", "MI", "MU", "ME", "MO"), 7)
    PyxelUtil.text(136,  20, ("YA", "LYA", "YU", "LYU", "YO", "LYO"), 8)
    PyxelUtil.text( 16,  28, ("RA", "RI", "RU", "RE", "RO"), 9)
    PyxelUtil.text( 56,  28, ("WA", "*  ", "WO", "*  ", "NN"), 10)

    PyxelUtil.text( 16,  40, ("a", "i", "u", "e", "o"), 11)
    PyxelUtil.text( 56,  40, ("ka", "ki", "ku", "ke", "ko"), 12)
    PyxelUtil.text( 96,  40, ("sa", "si", "su", "se", "so"), 13)
    PyxelUtil.text(136,  40, ("ta", "ti", "tu", "te", "to"), 14)
    PyxelUtil.text( 16,  48, ("na", "ni", "nu", "ne", "no"), 15)
    PyxelUtil.text( 56,  48, ("ha", "hi", "hu", "he", "ho"), 1)
    PyxelUtil.text( 96,  48, ("ma", "mi", "mu", "me", "mo"), 2)
    PyxelUtil.text(136,  48, ("ya", "lya", "yu", "lyu", "yo", "lyo"), 3)
    PyxelUtil.text( 16,  56, ("ra", "ri", "ru", "re", "ro"), 4)
    PyxelUtil.text( 56,  56, ("wa", "*  ", "wo", "*  ", "nn"), 5)

    PyxelUtil.text( 16,  64, ("LA", "LI", "LU", "LE", "LO", "la", "li", "lu", "le", "lo", "d", "hd", "(", ")", ".", ","), 6)

    PyxelUtil.text( 16,  80, ["TU", "KA", "I", "KA", "TA", "*:"], 8)
    PyxelUtil.text( 16,  88, ["*1)PyxelUtil.text( x, y, list[], col)"])
    PyxelUtil.text( 16,  96, ("*2)PyxelUtil.text( x, y, tuple(), col)"))
    PyxelUtil.text( 16, 104, "*3)PyxelUtil.text( x, y, str, col)")

    PyxelUtil.text( 16, 120, ("SE", "TU", "ME", "I", "*:"), 8)
    PyxelUtil.text( 16, 128, ("**", "te", "d", "-", "ta", "HA", "ri", "su", "to", "KE", "I", "SI", "KI", "KA", ","), 7)
    PyxelUtil.text( 20, 136, ("ta", "hu", "hd", "ru", ",", "*str", "TE", "D", "SI", "TE", "I", "SI", "MA", "SU", "."), 7)
    PyxelUtil.text( 16, 144, ("**", "SE", "NN", "TO", "U", "NI", "(", "**", ")", "WO", "TU", "KE", "TA", "te", "d", "-", "ta", "HA", "," ), 7)
    PyxelUtil.text( 16, 152, ("* ", "SO", "NO", "MA", "MA", "HI", "LYO", "U", "SI", "D", "SI", "MA", "SU", "."), 7)
    PyxelUtil.text( 16, 160, ("**", "I", "RO", "WO", "SI", "LYO", "U", "RI", "LYA", "KU", "SU", "RU", "TO", ",", "SI", "RO", "NI", "NA", "RI", "MA", "SU", "."), 7)


    pyxel.show()
